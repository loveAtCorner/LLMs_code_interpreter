{
    "model": "qwen1.5-32b-chat-int4",
    "messages": [
        {
            "role": "system",
            "content": "你是python源码结构和逻辑的解析专家，非常擅长剖析核心代码的功能"
        },
        {
            "role": "user",
            "content": "返回下面这个脚本当中所有函数或者类的名称，及其对应的功能\n返回内容的格式需要遵循markdown表格的形式\n\n```python\nimport json\nimport os\nfrom typing import TYPE_CHECKING, Any, Dict, List, Tuple\n\nfrom ...extras.constants import DATA_CONFIG\nfrom ...extras.packages import is_gradio_available\n\n\nif is_gradio_available():\n    import gradio as gr\n\n\nif TYPE_CHECKING:\n    from gradio.components import Component\n\n\nPAGE_SIZE = 2\n\n\ndef prev_page(page_index: int) -> int:\n    return page_index - 1 if page_index > 0 else page_index\n\n\ndef next_page(page_index: int, total_num: int) -> int:\n    return page_index + 1 if (page_index + 1) * PAGE_SIZE < total_num else page_index\n\n\ndef can_preview(dataset_dir: str, dataset: list) -> \"gr.Button\":\n    try:\n        with open(os.path.join(dataset_dir, DATA_CONFIG), \"r\", encoding=\"utf-8\") as f:\n            dataset_info = json.load(f)\n    except Exception:\n        return gr.Button(interactive=False)\n\n    if len(dataset) == 0 or \"file_name\" not in dataset_info[dataset[0]]:\n        return gr.Button(interactive=False)\n\n    data_path = os.path.join(dataset_dir, dataset_info[dataset[0]][\"file_name\"])\n    if os.path.isfile(data_path) or (os.path.isdir(data_path) and os.listdir(data_path)):\n        return gr.Button(interactive=True)\n    else:\n        return gr.Button(interactive=False)\n\n\ndef _load_data_file(file_path: str) -> List[Any]:\n    with open(file_path, \"r\", encoding=\"utf-8\") as f:\n        if file_path.endswith(\".json\"):\n            return json.load(f)\n        elif file_path.endswith(\".jsonl\"):\n            return [json.loads(line) for line in f]\n        else:\n            return list(f)\n\n\ndef get_preview(dataset_dir: str, dataset: list, page_index: int) -> Tuple[int, list, \"gr.Column\"]:\n    with open(os.path.join(dataset_dir, DATA_CONFIG), \"r\", encoding=\"utf-8\") as f:\n        dataset_info = json.load(f)\n\n    data_path = os.path.join(dataset_dir, dataset_info[dataset[0]][\"file_name\"])\n    if os.path.isfile(data_path):\n        data = _load_data_file(data_path)\n    else:\n        data = []\n        for file_name in os.listdir(data_path):\n            data.extend(_load_data_file(os.path.join(data_path, file_name)))\n\n    return len(data), data[PAGE_SIZE * page_index : PAGE_SIZE * (page_index + 1)], gr.Column(visible=True)\n\n\ndef create_preview_box(dataset_dir: \"gr.Textbox\", dataset: \"gr.Dropdown\") -> Dict[str, \"Component\"]:\n    data_preview_btn = gr.Button(interactive=False, scale=1)\n    with gr.Column(visible=False, elem_classes=\"modal-box\") as preview_box:\n        with gr.Row():\n            preview_count = gr.Number(value=0, interactive=False, precision=0)\n            page_index = gr.Number(value=0, interactive=False, precision=0)\n\n        with gr.Row():\n            prev_btn = gr.Button()\n            next_btn = gr.Button()\n            close_btn = gr.Button()\n\n        with gr.Row():\n            preview_samples = gr.JSON()\n\n    dataset.change(can_preview, [dataset_dir, dataset], [data_preview_btn], queue=False).then(\n        lambda: 0, outputs=[page_index], queue=False\n    )\n    data_preview_btn.click(\n        get_preview, [dataset_dir, dataset, page_index], [preview_count, preview_samples, preview_box], queue=False\n    )\n    prev_btn.click(prev_page, [page_index], [page_index], queue=False).then(\n        get_preview, [dataset_dir, dataset, page_index], [preview_count, preview_samples, preview_box], queue=False\n    )\n    next_btn.click(next_page, [page_index, preview_count], [page_index], queue=False).then(\n        get_preview, [dataset_dir, dataset, page_index], [preview_count, preview_samples, preview_box], queue=False\n    )\n    close_btn.click(lambda: gr.Column(visible=False), outputs=[preview_box], queue=False)\n    return dict(\n        data_preview_btn=data_preview_btn,\n        preview_count=preview_count,\n        page_index=page_index,\n        prev_btn=prev_btn,\n        next_btn=next_btn,\n        close_btn=close_btn,\n        preview_samples=preview_samples,\n    )\n```"
        }
    ],
    "temperature": 0
}